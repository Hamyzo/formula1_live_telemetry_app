<!doctype html>

<html ng-app="angRaceApp">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.8/angular.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/2.5.0/ui-bootstrap-tpls.min.js"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
        <script src="/raceManagement.js"></script>
      </head>
      <body>
	  	<h1>Races</h1>
        <div ng-controller="RacesController">
			<select ng-options="race as race._id + ' - ' + race.date group by race.country for race in races"
					ng-model="selectedRace" ng-change="updateRace()"></select>
			<button class="btn btn-primary"  ng-click="open()">Create new race</button>

			<div ng-if="showNewRace">
				<div class="modal-header">
					<h3 class="modal-title">Add a new race</h3>
				</div>
				<div class="modal-body">
					<form class="form-group" ng-submit="newRace()">
						<label class="ml-2 mb-2">Country </label><input class="form-control ml-2 mb-2" type="text" ng-model="race.country"/>
						<label class="ml-2 mb-2">Date </label><input class="form-control ml-2 mb-2" type="date" ng-model="race.date"/>
						<label class="ml-2 mb-2">Circuit</label>
						<select class="form-control ml-2 mb-2" ng-model="race.circuit">
							<option value="">Select the circuit</option>
							<option ng-repeat="circuit in circuits" value={{circuit._id}}>{{circuit.name}} - {{circuit.country}}</option>
						</select>
						<label class="ml-2 mb-2">Number of laps </label><input class="form-control ml-2 mb-2" type="text" ng-model="race.nb_laps"/>
						<input class="btn btn-primary ml-2 mb-2" type="submit"  value="Create Race" />
						<button class="btn btn-default ml-2 mb-2" ng-click="cancel()">Cancel</button>
					</form>
				</div>
			</div>
			<div ng-if="!showNewRace">
				<h1>Details of race: {{selectedRace._id}}</h1>
			</div>
        </div>
      </body>
    </html>

